# Matchfile - Configuration for fastlane match
# Documentation: https://docs.fastlane.tools/actions/match/

# Git URL for the repository containing certificates
# Replace with your private certificates repository
git_url("https://github.com/biso-no/ios-certificates")

# Storage mode (git is recommended)
storage_mode("git")

# Default match type (can be overridden in lanes)
type("appstore") # or "development", "adhoc", "enterprise"

# Bundle identifier(s)
app_identifier(["com.biso.no"])

# Your Apple Developer Portal username
# This should match the account that owns the certificates
# username("markus@biso.no")  # Commented out to force API key usage

# Team ID from Apple Developer Portal
# Find this in Membership section of developer.apple.com
# team_id("YOUR_TEAM_ID")

# For CI environments - only use existing profiles, don't create new ones
readonly(ENV["CI"] == "true" || ENV["GITHUB_ACTIONS"] == "true")

# Platform
platform("ios")

# Additional options for git storage
git_branch("main")

# Clone depth for faster operations
shallow_clone(true)

# Verbose output for debugging (optional)
verbose(ENV["VERBOSE"] == "true")

# Force match to use manual code signing
# (required when Xcode project uses manual signing)
force_for_new_devices(false)

# Skip confirmation prompts (useful for CI)
skip_confirmation(ENV["CI"] == "true")

# Generate Apple TV profiles (if needed)
# generate_apple_certs(false)

# Skip provisioning profiles verification with App Store Connect
# skip_provisioning_profiles(false)
